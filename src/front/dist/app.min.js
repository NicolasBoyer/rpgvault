function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(){n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),s=new _(r||[]);return i(a,"_invoke",{value:x(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};l(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m($([])));g&&g!==e&&r.call(g,a)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function A(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function $(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:p,configurable:!0}),p.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(k.prototype),l(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,u,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=$,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:$(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function s(t){i(a,r,o,s,u,"next",t)}function u(t){i(a,r,o,s,u,"throw",t)}s(void 0)}))}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,n){return(e=E(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e,n){return p=d()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i},p.apply(null,arguments)}function v(t){var e="function"==typeof Map?new Map:void 0;return v=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)},v(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function g(t){var e=d();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function b(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){if(t){if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=x(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function E(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function _(t,e){return T(t,I(t,e,"get"))}function $(t,e,n){return O(t,I(t,e,"set"),n),n}function I(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function M(t,e,n){return P(t,e),j(n,"get"),T(t,n)}function L(t,e,n,r){return P(t,e),j(n,"set"),O(t,n,r),r}function C(t,e,n){return P(t,e),n}function T(t,e){return e.get?e.get.call(t):e.value}function O(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function P(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}function j(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function H(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function N(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function B(t,e,n){N(t,e),e.set(t,n)}function D(t,e){N(t,e),e.add(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var F,R=window,W=R.trustedTypes,z=W?W.createPolicy("lit-html",{createHTML:function(t){return t}}):void 0,q="lit$".concat((Math.random()+"").slice(9),"$"),Y="?"+q,V="<".concat(Y,">"),X=document,U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return X.createComment(t)},G=function(t){return null===t||"object"!==r(t)&&"function"!=typeof t},J=Array.isArray,Z=function(t){return J(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator])},K=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Q=/-->/g,tt=/>/g,et=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),nt=/'/g,rt=/"/g,it=/^(?:script|style|textarea|title)$/i,ot=function(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return{_$litType$:t,strings:e,values:r}}}(1),at=Symbol.for("lit-noChange"),st=Symbol.for("lit-nothing"),ut=new WeakMap,lt=function(t,e,n){var r,i,o=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:e,a=o._$litPart$;if(void 0===a){var s=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:null;o._$litPart$=a=new vt(e.insertBefore(U(),s),s,void 0,null!=n?n:{})}return a._$AI(t),a},ct=X.createTreeWalker(X,129,null,!1),ht=function(t,e){for(var n,r=t.length-1,i=[],o=2===e?"<svg>":"",a=K,s=0;s<r;s++){for(var u=t[s],l=void 0,c=void 0,h=-1,f=0;f<u.length&&(a.lastIndex=f,null!==(c=a.exec(u)));)f=a.lastIndex,a===K?"!--"===c[1]?a=Q:void 0!==c[1]?a=tt:void 0!==c[2]?(it.test(c[2])&&(n=RegExp("</"+c[2],"g")),a=et):void 0!==c[3]&&(a=et):a===et?">"===c[0]?(a=null!=n?n:K,h=-1):void 0===c[1]?h=-2:(h=a.lastIndex-c[2].length,l=c[1],a=void 0===c[3]?et:'"'===c[3]?rt:nt):a===rt||a===nt?a=et:a===Q||a===tt?a=K:(a=et,n=void 0);var d=a===et&&t[s+1].startsWith("/>")?" ":"";o+=a===K?u+V:h>=0?(i.push(l),u.slice(0,h)+"$lit$"+u.slice(h)+q+d):u+q+(-2===h?(i.push(void 0),s):d)}var p=o+(t[r]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==z?z.createHTML(p):p,i]},ft=function(){function t(e,n){var r,i=e.strings,o=e._$litType$;a(this,t),this.parts=[];var s=0,u=0,l=i.length-1,c=this.parts,h=w(ht(i,o),2),f=h[0],d=h[1];if(this.el=t.createElement(f,n),ct.currentNode=this.el.content,2===o){var p=this.el.content,v=p.firstChild;v.remove(),p.append.apply(p,k(v.childNodes))}for(;null!==(r=ct.nextNode())&&c.length<l;){if(1===r.nodeType){if(r.hasAttributes()){var y,m=[],g=S(r.getAttributeNames());try{for(g.s();!(y=g.n()).done;){var b=y.value;if(b.endsWith("$lit$")||b.startsWith(q)){var x=d[u++];if(m.push(b),void 0!==x){var A=r.getAttribute(x.toLowerCase()+"$lit$").split(q),E=/([.?@])?(.*)/.exec(x);c.push({type:1,index:s,name:E[2],strings:A,ctor:"."===E[1]?mt:"?"===E[1]?bt:"@"===E[1]?wt:yt})}else c.push({type:6,index:s})}}}catch(t){g.e(t)}finally{g.f()}for(var _=0,$=m;_<$.length;_++){var I=$[_];r.removeAttribute(I)}}if(it.test(r.tagName)){var M=r.textContent.split(q),L=M.length-1;if(L>0){r.textContent=W?W.emptyScript:"";for(var C=0;C<L;C++)r.append(M[C],U()),ct.nextNode(),c.push({type:2,index:++s});r.append(M[L],U())}}}else if(8===r.nodeType)if(r.data===Y)c.push({type:2,index:s});else for(var T=-1;-1!==(T=r.data.indexOf(q,T+1));)c.push({type:7,index:s}),T+=q.length-1;s++}}return u(t,null,[{key:"createElement",value:function(t,e){var n=X.createElement("template");return n.innerHTML=t,n}}]),t}();function dt(t,e){var n,r,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,s=arguments.length>3?arguments[3]:void 0;if(e===at)return e;var u=void 0!==s?null===(n=a._$Cl)||void 0===n?void 0:n[s]:a._$Cu,l=G(e)?void 0:e._$litDirective$;return(null==u?void 0:u.constructor)!==l&&(null===(r=null==u?void 0:u._$AO)||void 0===r||r.call(u,!1),void 0===l?u=void 0:(u=new l(t))._$AT(t,a,s),void 0!==s?(null!==(i=(o=a)._$Cl)&&void 0!==i?i:o._$Cl=[])[s]=u:a._$Cu=u),void 0!==u&&(e=dt(t,u._$AS(t,e.values),u,s)),e}var pt=function(){function t(e,n){a(this,t),this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=n}return u(t,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"p",value:function(t){var e,n=this._$AD,r=n.el.content,i=n.parts,o=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:X).importNode(r,!0);ct.currentNode=o;for(var a=ct.nextNode(),s=0,u=0,l=i[0];void 0!==l;){if(s===l.index){var c=void 0;2===l.type?c=new vt(a,a.nextSibling,this,t):1===l.type?c=new l.ctor(a,l.name,l.strings,this,t):6===l.type&&(c=new kt(a,this,t)),this.v.push(c),l=i[++u]}s!==(null==l?void 0:l.index)&&(a=ct.nextNode(),s++)}return o}},{key:"m",value:function(t){var e,n=0,r=S(this.v);try{for(r.s();!(e=r.n()).done;){var i=e.value;void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,n),n+=i.strings.length-2):i._$AI(t[n])),n++}}catch(t){r.e(t)}finally{r.f()}}}]),t}(),vt=function(){function t(e,n,r,i){var o;a(this,t),this.type=2,this._$AH=st,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$C_=null===(o=null==i?void 0:i.isConnected)||void 0===o||o}return u(t,[{key:"_$AU",get:function(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$C_}},{key:"parentNode",get:function(){var t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;t=dt(this,t,e),G(t)?t===st||null==t||""===t?(this._$AH!==st&&this._$AR(),this._$AH=st):t!==this._$AH&&t!==at&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):Z(t)?this.O(t):this.$(t)}},{key:"S",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(t,e)}},{key:"k",value:function(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}},{key:"$",value:function(t){this._$AH!==st&&G(this._$AH)?this._$AA.nextSibling.data=t:this.k(X.createTextNode(t)),this._$AH=t}},{key:"T",value:function(t){var e,n=t.values,r=t._$litType$,i="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=ft.createElement(r.h,this.options)),r);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.m(n);else{var o=new pt(i,this),a=o.p(this.options);o.m(n),this.k(a),this._$AH=o}}},{key:"_$AC",value:function(t){var e=ut.get(t.strings);return void 0===e&&ut.set(t.strings,e=new ft(t)),e}},{key:"O",value:function(e){J(this._$AH)||(this._$AH=[],this._$AR());var n,r,i=this._$AH,o=0,a=S(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;o===i.length?i.push(n=new t(this.S(U()),this.S(U()),this,this.options)):n=i[o],n._$AI(s),o++}}catch(t){a.e(t)}finally{a.f()}o<i.length&&(this._$AR(n&&n._$AB.nextSibling,o),i.length=o)}},{key:"_$AR",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,n=arguments.length>1?arguments[1]:void 0;for(null===(t=this._$AP)||void 0===t||t.call(this,!1,!0,n);e&&e!==this._$AB;){var r=e.nextSibling;e.remove(),e=r}}},{key:"setConnected",value:function(t){var e;void 0===this._$AM&&(this._$C_=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}]),t}(),yt=function(){function t(e,n,r,i,o){a(this,t),this.type=1,this._$AH=st,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=o,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=st}return u(t,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=this.strings,o=!1;if(void 0===i)t=dt(this,t,e,0),(o=!G(t)||t!==this._$AH&&t!==at)&&(this._$AH=t);else{var a,s,u=t;for(t=i[0],a=0;a<i.length-1;a++)(s=dt(this,u[n+a],e,a))===at&&(s=this._$AH[a]),o||(o=!G(s)||s!==this._$AH[a]),s===st?t=st:t!==st&&(t+=(null!=s?s:"")+i[a+1]),this._$AH[a]=s}o&&!r&&this.P(t)}},{key:"P",value:function(t){t===st?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}]),t}(),mt=function(t){c(n,yt);var e=g(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).type=3,t}return u(n,[{key:"P",value:function(t){this.element[this.name]=t===st?void 0:t}}]),n}(),gt=W?W.emptyScript:"",bt=function(t){c(n,yt);var e=g(n);function n(){var t;return a(this,n),(t=e.apply(this,arguments)).type=4,t}return u(n,[{key:"P",value:function(t){t&&t!==st?this.element.setAttribute(this.name,gt):this.element.removeAttribute(this.name)}}]),n}(),wt=function(t){c(n,yt);var e=g(n);function n(t,r,i,o,s){var u;return a(this,n),(u=e.call(this,t,r,i,o,s)).type=5,u}return u(n,[{key:"_$AI",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if((t=null!==(e=dt(this,t,n,0))&&void 0!==e?e:st)!==at){var r=this._$AH,i=t===st&&r!==st||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==st&&(r===st||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}}},{key:"handleEvent",value:function(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this._$AH.handleEvent(t)}}]),n}(),kt=function(){function t(e,n,r){a(this,t),this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}return u(t,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(t){dt(this,t)}}]),t}(),xt=R.litHtmlPolyfillSupport;null==xt||xt(ft,vt),(null!==(F=R.litHtmlVersions)&&void 0!==F?F:R.litHtmlVersions=[]).push("2.3.1");var At,St,Et=function(){function t(){a(this,t)}return u(t,null,[{key:"newDom",value:function(t){return this.setCurrent(t)}},{key:"setCurrent",value:function(t){return this.currentElement=t,this}},{key:"elt",value:function(t,e){var n=document.createElement(t);return e&&(n.className=e),this.currentElement.appendChild(n),this.currentElement=n,this}},{key:"svg",value:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add(t);var n=document.createElementNS("http://www.w3.org/2000/svg","use");return e.appendChild(n),n.setAttribute("href","#".concat(t)),this.currentElement.appendChild(e),this.currentElement=e,this}},{key:"att",value:function(t,e){return null!==e&&this.currentElement.setAttribute(t,e),this}},{key:"text",value:function(t){return null!==t&&this.currentElement.appendChild(document.createTextNode(t)),this}},{key:"listen",value:function(t,e){return this.currentElement.addEventListener(t,e,!1),this}},{key:"up",value:function(){return this.currentElement=this.currentElement.parentNode,this.currentElement||(this.currentElement=document.body),this}},{key:"clear",value:function(){return this.currentElement.innerHTML="",this}},{key:"current",value:function(){return this.currentElement}},{key:"remove",value:function(){this.currentElement.remove()}}]),t}(),_t=function(){function t(){a(this,t)}return u(t,null,[{key:"set",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)r%2==0&&sessionStorage.setItem(e[r],JSON.stringify(e[r+1]))}},{key:"get",value:function(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){return t.push(JSON.parse(sessionStorage.getItem(e)))})),1===(t=t.filter((function(t){return t}))).length&&t.length===n.length?t[0]:t.length&&t.length===n.length?t:null}}]),t}(),$t=function(){function t(){a(this,t)}var r,i,s;return u(t,null,[{key:"helpers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.confirmMessage,n=void 0===e?"":e,r=t.cbConfirm,i=void 0===r?null:r,o=t.isConfirmInit,a=void 0===o||o,s=t.loaderVisible,u=void 0!==s&&s;lt(ot(At||(At=b(['\n\t\t\t<fs-loader ?visible="','"></fs-loader>\n\t\t\t<fs-confirm .message="','" ?open="','" @modalConfirm="','"></fs-confirm>\n\t\t'])),u,n,a?!a:Math.random(),(function(){return i()})),document.body)}},{key:"loader",value:function(t){this.helpers({loaderVisible:t})}},{key:"confirm",value:function(t,e,n){this.helpers({confirmMessage:t,cbConfirm:e,isConfirmInit:!1})}},{key:"toast",value:function(t,e){Et.newDom(document.body).elt("fs-toast").att("type",t).att("message",e)}},{key:"request",value:(s=o(n().mark((function t(r){var i,o,a,s,u=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>1&&void 0!==u[1]?u[1]:"GET",o=u.length>2?u[2]:void 0,a=u.length>3?u[3]:void 0,t.next=5,fetch(r,e(e({},{method:i}),o));case 5:if(s=t.sent,"status"!==a||"HEAD"!==i){t.next=8;break}return t.abrupt("return",s.status);case 8:if(200===s.status||204===s.status){t.next=13;break}console.error("Request failed : "+s.status),console.log(s),t.next=20;break;case 13:t.t0=a,t.next="blob"===t.t0?16:"text"===t.t0?17:"response"===t.t0?18:19;break;case 16:return t.abrupt("return",s.blob());case 17:return t.abrupt("return",s.text());case 18:return t.abrupt("return",s);case 19:return t.abrupt("return",s.json());case 20:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})},{key:"getFragmentHtml",value:(i=o(n().mark((function e(r){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=_t.get(r),e.t0){e.next=5;break}return e.next=4,t.request(r,"POST");case 4:e.t0=e.sent;case 5:return i=e.t0,_t.set(r,i),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),function(t){return i.apply(this,arguments)})},{key:"generateId",value:function(){return(new Date).getTime()}},{key:"getMousePosition",value:function(){return{x:It,y:Mt}}},{key:"getFileFromFileReader",value:(r=o(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){return t(r.result)})),r.addEventListener("error",(function(){return n})),r.readAsDataURL(e)})));case 1:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"slugify",value:function(t){var e="ãàáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/-,:;",n=new RegExp(e.split("").join("|"),"g");return t.toString().toLowerCase().replace(/\s+/g,"_").replace(n,(function(t){return"aaaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh______".charAt(e.indexOf(t))})).replace(/&/g,"_and_").replace(/[^\w\-]+/g,"").replace(/--+/g,"_").replace(/^-+/,"").replace(/-+$/,"")}}]),t}(),It=0,Mt=0;document.body.addEventListener("pointermove",(function(t){It=t.pageX+window.scrollX,Mt=t.pageY+window.scrollY}));var Lt=new WeakSet,Ct=function(t){c(n,v(HTMLElement));var e=g(n);function n(){var t;a(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return D(y(t=e.call.apply(e,[this].concat(i))),Lt),t}return u(n,[{key:"visible",get:function(){return this.hasAttribute("visible")},set:function(t){t?this.setAttribute("visible",""):this.removeAttribute("visible")}},{key:"connectedCallback",value:function(){H(this,Lt,Tt).call(this),this.style.display="none"}},{key:"attributeChangedCallback",value:function(t,e,n){var r=this;"visible"===t&&e!==n&&(""===n&&(this.style.display="",setTimeout((function(){return H(r,Lt,Tt).call(r)}),20)),null===n&&(this.style.display="none",setTimeout((function(){return H(r,Lt,Tt).call(r)}),20)))}}],[{key:"observedAttributes",get:function(){return["visible"]}}]),n}();function Tt(){lt(ot(St||(St=b(['\n\t\t\t<div class="spinner"></div>']))),this)}var Ot=function(){function t(){a(this,t)}return u(t,null,[{key:"init",value:function(e,n,r){L(this,t,Rt,e),L(this,t,Wt,Et.newDom(e)),L(this,t,zt,n),L(this,t,qt,r),C(this,t,Pt).call(this),M(this,t,Rt).addEventListener("pointerdown",C(this,t,jt)),M(this,t,Rt).addEventListener("pointermove",C(this,t,Ht))}}]),t}();function Pt(){L(this,Ot,Ft,{x:0,y:0,startX:0,startY:0})}function jt(){M(Ot,Ot,Rt).addEventListener("click",C(Ot,Ot,Nt)),M(Ot,Ot,Ft).startX=M(Ot,Ot,Ft).x,M(Ot,Ot,Ft).startY=M(Ot,Ot,Ft).y,M(Ot,Ot,Wt).elt("div","rectangle").att("style","left:".concat(M(Ot,Ot,Ft).x,"px;top:").concat(M(Ot,Ot,Ft).y,"px;cursor:crosshair;"))}function Ht(t){t.returnValue=!1,M(Ot,Ot,Ft).x=t.pageX+window.scrollX-M(Ot,Ot,zt).x,M(Ot,Ot,Ft).y=t.pageY+window.scrollY-M(Ot,Ot,zt).y,0!==t.pressure&&M(Ot,Ot,Wt).att("style","width:".concat(Math.abs(M(Ot,Ot,Ft).x-M(Ot,Ot,Ft).startX),"px;height:").concat(Math.abs(M(Ot,Ot,Ft).y-M(Ot,Ot,Ft).startY),"px;left:").concat(M(Ot,Ot,Ft).x-M(Ot,Ot,Ft).startX<0?"".concat(M(Ot,Ot,Ft).x,"px"):"".concat(M(Ot,Ot,Ft).startX,"px"),";top:").concat(M(Ot,Ot,Ft).y-M(Ot,Ot,Ft).startY<0?"".concat(M(Ot,Ot,Ft).y,"px"):"".concat(M(Ot,Ot,Ft).startY,"px")))}function Nt(t){return Bt.apply(this,arguments)}function Bt(){return(Bt=o(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(Ot,Ot,qt).call(Ot,M(Ot,Ot,Ft),e);case 2:M(Ot,Ot,Wt).current().remove(),C(Ot,Ot,Dt).call(Ot);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Dt(){C(this,Ot,Pt).call(this),M(this,Ot,Rt).removeEventListener("pointerdown",C(this,Ot,jt)),M(this,Ot,Rt).removeEventListener("pointermove",C(this,Ot,Ht)),M(this,Ot,Rt).removeEventListener("click",C(this,Ot,Nt))}var Ft={writable:!0,value:void 0},Rt={writable:!0,value:void 0},Wt={writable:!0,value:void 0},zt={writable:!0,value:void 0},qt={writable:!0,value:void 0},Yt=function(){function t(){a(this,t)}return u(t,null,[{key:"set",value:function(e,n,r){M(this,t,Gt)[n.join()]={element:e,keys:n,action:r},null==e||e.addEventListener("keydown",C(this,t,Vt)),null==e||e.addEventListener("keyup",C(this,t,Xt))}}]),t}();function Vt(t){if(Object.keys(M(Yt,Yt,Gt)).some((function(e){return e.split(",").includes(t.key)}))&&qe.editMode){t.preventDefault(),M(Yt,Yt,Ut)[t.key]=!0;var e=M(Yt,Yt,Gt)[Object.keys(M(Yt,Yt,Gt)).find((function(t){return t.split(",").sort().join()===Object.keys(M(Yt,Yt,Ut)).filter((function(t){return M(Yt,Yt,Ut)[t]})).map((function(t){return t})).sort().join()}))];if(!e)return;e.action(t)}}function Xt(t){M(Yt,Yt,Ut)[t.key]=!1}var Ut={writable:!0,value:{}},Gt={writable:!0,value:{}},Jt=function(){function t(){a(this,t)}return u(t,null,[{key:"init",value:function(e,n,r){var i=this;L(this,t,ie,e),L(this,t,oe,M(this,t,ie).querySelector("input, textarea")||M(this,t,ie)),L(this,t,ae,n),L(this,t,se,r),L(this,t,re,{x:0,y:0,translateX:0,translateY:0,originalX:0,originalY:0}),window.addEventListener("resize",(function(){return C(i,t,Zt).call(i)})),C(this,t,Zt).call(this),document.body.addEventListener("pointermove",C(this,t,te)),document.body.addEventListener("pointerup",C(this,t,ee))}}]),t}();function Zt(){var t=M(this,Jt,ie).getBoundingClientRect();this.boxPositions=[{top:0,left:0,class:"leftTop"},{top:t.height/2,left:0,class:"leftCenter"},{top:t.height,left:0,class:"leftBottom"},{top:0,left:t.width/2,class:"centerTop"},{top:t.height,left:t.width/2,class:"centerBottom"},{top:0,left:t.width,class:"rightTop"},{top:t.height/2,left:t.width,class:"rightCenter"},{top:t.height,left:t.width,class:"rightBottom"}];var e,n=S(this.boxPositions);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=document.querySelector(".".concat(r.class));i&&(i.setAttribute("style","top: ".concat(r.top-7.5,"px;left: ").concat(r.left-7.5,"px;width: ").concat(15,"px;height: ").concat(15,"px;border-radius: ").concat(15,"px;")),i.addEventListener("pointerdown",C(this,Jt,Kt)))}}catch(t){n.e(t)}finally{n.f()}}function Kt(t){return Qt.apply(this,arguments)}function Qt(){return(Qt=o(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M(Jt,Jt,re).originalX=e.pageX,M(Jt,Jt,re).originalY=e.pageY,Jt.leftHorizontalMove=e.target.className.includes("left"),Jt.rightHorizontalMove=e.target.className.includes("right"),Jt.topVerticalMove=e.target.className.includes("Top"),Jt.bottomVerticalMove=e.target.className.includes("Bottom"),Jt.width=M(Jt,Jt,ie).getBoundingClientRect().width,Jt.height=M(Jt,Jt,ie).getBoundingClientRect().height,Jt.isPointerDown=!0,document.body.classList.add("isResizing");case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function te(t){t.returnValue=!1,M(Jt,Jt,re).x=t.pageX-M(Jt,Jt,re).originalX,M(Jt,Jt,re).y=t.pageY-M(Jt,Jt,re).originalY;var e=new WebKitCSSMatrix(getComputedStyle(M(Jt,Jt,ie)).transform);M(Jt,Jt,re).translateX=e.m41,M(Jt,Jt,re).translateY=e.m42,0!==t.pressure&&Jt.isPointerDown&&(Jt.leftHorizontalMove&&(M(Jt,Jt,re).translateX=t.pageX+window.scrollX-M(Jt,Jt,ae).x,M(Jt,Jt,oe).style.width=Jt.width-M(Jt,Jt,re).x+"px"),Jt.rightHorizontalMove&&(M(Jt,Jt,oe).style.width=Jt.width+M(Jt,Jt,re).x+"px"),Jt.topVerticalMove&&(M(Jt,Jt,re).translateY=t.pageY+window.scrollY-M(Jt,Jt,ae).y,M(Jt,Jt,oe).style.height=Jt.height-M(Jt,Jt,re).y+"px"),Jt.bottomVerticalMove&&(M(Jt,Jt,oe).style.height=Jt.height+M(Jt,Jt,re).y+"px"),M(Jt,Jt,ie).style.transform="translate(".concat(M(Jt,Jt,re).translateX,"px, ").concat(M(Jt,Jt,re).translateY,"px)"),C(Jt,Jt,Zt).call(Jt))}function ee(){return ne.apply(this,arguments)}function ne(){return(ne=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Jt.isPointerDown){t.next=5;break}return t.next=3,M(Jt,Jt,se).call(Jt,{x:M(Jt,Jt,re).translateX,y:M(Jt,Jt,re).translateY,width:parseInt(M(Jt,Jt,oe).style.width),height:parseInt(M(Jt,Jt,oe).style.height)});case 3:Jt.isPointerDown=!1,document.body.classList.remove("isResizing");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var re={writable:!0,value:void 0},ie={writable:!0,value:void 0},oe={writable:!0,value:void 0},ae={writable:!0,value:void 0},se={writable:!0,value:void 0};l(Jt,"isPointerDown",!1),l(Jt,"boxPositions",[{class:"leftTop"},{class:"leftCenter"},{class:"leftBottom"},{class:"centerTop"},{class:"centerBottom"},{class:"rightTop"},{class:"rightCenter"},{class:"rightBottom"}]);var ue=function(){function t(){a(this,t)}return u(t,null,[{key:"init",value:function(e,n,r){var i=this;L(this,t,ye,e),L(this,t,me,M(this,t,ye).querySelector("input, textarea")||M(this,t,ye)),L(this,t,ge,n),L(this,t,be,r),L(this,t,ve,{x:0,y:0}),M(this,t,me).addEventListener("pointerdown",C(this,t,le)),M(this,t,me).addEventListener("pointerup",C(this,t,fe)),document.body.addEventListener("pointermove",C(this,t,he)),Yt.set(M(this,t,ye),["ArrowUp"],(function(){return C(i,t,pe).call(i,0,-1)})),Yt.set(M(this,t,ye),["ArrowDown"],(function(){return C(i,t,pe).call(i,0,1)})),Yt.set(M(this,t,ye),["ArrowRight"],(function(){return C(i,t,pe).call(i,1)})),Yt.set(M(this,t,ye),["ArrowLeft"],(function(){return C(i,t,pe).call(i,-1)})),Yt.set(M(this,t,ye),["Shift","ArrowUp"],(function(){return C(i,t,pe).call(i,0,-10)})),Yt.set(M(this,t,ye),["Shift","ArrowDown"],(function(){return C(i,t,pe).call(i,0,10)})),Yt.set(M(this,t,ye),["Shift","ArrowRight"],(function(){return C(i,t,pe).call(i,10)})),Yt.set(M(this,t,ye),["Shift","ArrowLeft"],(function(){return C(i,t,pe).call(i,-10)})),Yt.set(M(this,t,ye),["Control","ArrowUp"],(function(){return C(i,t,pe).call(i,0,-50)})),Yt.set(M(this,t,ye),["Control","ArrowDown"],(function(){return C(i,t,pe).call(i,0,50)})),Yt.set(M(this,t,ye),["Control","ArrowRight"],(function(){return C(i,t,pe).call(i,50)})),Yt.set(M(this,t,ye),["Control","ArrowLeft"],(function(){return C(i,t,pe).call(i,-50)}))}}]),t}();function le(){return ce.apply(this,arguments)}function ce(){return(ce=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ue.isPointerDown=!0,document.body.classList.add("isMoving");case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function he(t){t.returnValue=!1;var e=new WebKitCSSMatrix(getComputedStyle(M(ue,ue,ye)).transform);L(ue,ue,ge,{x:M(ue,ue,ge).x+(M(ue,ue,ve).x-e.m41),y:M(ue,ue,ge).y+(M(ue,ue,ve).y-e.m42)}),M(ue,ue,ve).x=t.pageX+window.scrollX-M(ue,ue,ge).x,M(ue,ue,ve).y=t.pageY+window.scrollY-M(ue,ue,ge).y,0!==t.pressure&&ue.isPointerDown&&!Jt.isPointerDown&&(L(ue,ue,we,!0),M(ue,ue,ye).style.transform="translate(".concat(M(ue,ue,ve).x,"px, ").concat(M(ue,ue,ve).y,"px)"))}function fe(){return de.apply(this,arguments)}function de(){return(de=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M(ue,ue,we)){t.next=3;break}return t.next=3,M(ue,ue,be).call(ue,M(ue,ue,ve));case 3:ue.isPointerDown&&(ue.isPointerDown=L(ue,ue,we,!1),document.body.classList.remove("isMoving"));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new WebKitCSSMatrix(getComputedStyle(M(ue,ue,ye)).transform),r=n.m41+t,i=n.m42+e;setTimeout((function(){M(ue,ue,ye).style.transform="translate(".concat(r,"px, ").concat(i,"px)")})),M(ue,ue,be).call(ue,{x:r,y:i})}var ve={writable:!0,value:void 0},ye={writable:!0,value:void 0},me={writable:!0,value:void 0},ge={writable:!0,value:void 0},be={writable:!0,value:void 0},we={writable:!0,value:!1};l(ue,"isPointerDown",!1);var ke=function(){function t(){a(this,t)}return u(t,null,[{key:"delete",value:function(e){if("input"===M(this,t,xe)){var n=Ye.sheet.inputs.findIndex((function(t){return t.id===e}));-1!==n&&(Ye.sheet.inputs.splice(n,1),Ye.deletedInputs.push(e))}if("image"===M(this,t,xe)){var r=Ye.sheet.images.findIndex((function(t){return t.id===e}));-1!==r&&(Ye.sheet.images.splice(r,1),Ye.deletedImages.push(e))}qe.isSaved=!1,Fe.render()}},{key:"clone",value:function(n,r){"input"===M(this,t,xe)&&Ye.addInputValues(e(e({},r),{},{id:$t.generateId().toString()})),"image"===M(this,t,xe)&&Ye.addImageValues(e(e({},r),{},{id:$t.generateId().toString()})),this.select(n,r)}},{key:"copy",value:function(t,e){_t.set("elementDatas",e)}},{key:"paste",value:function(n){var r=$t.getMousePosition(),i=e(e({},_t.get("elementDatas")),{},{x:Math.round((r.x-Qe.containerLeft)/Qe.ratio),y:Math.round((r.y-Qe.containerTop)/Qe.ratio),id:$t.generateId().toString()});"input"===M(this,t,xe)&&Ye.addInputValues(i),"image"===M(this,t,xe)&&Ye.addImageValues(i),this.select(n,i)}},{key:"select",value:function(e,n){var r=this;if(qe.editMode&&(e&&e.stopPropagation(),this.selectedElementId=null==n?void 0:n.id,Fe.render(),n)){var i=document.querySelector("label[for='".concat(n.id,"'], div[id='").concat(n.id,"']"));L(this,t,xe,"LABEL"===i.tagName?"input":"image"),ue.init(i,{x:Qe.containerLeft,y:Qe.containerTop},(function(e){"input"===M(r,t,xe)&&Ye.addInputValues(n,"x",Math.round(e.x/Qe.ratio),"y",Math.round(e.y/Qe.ratio)),"image"===M(r,t,xe)&&Ye.addImageValues(n,"x",Math.round(e.x/Qe.ratio),"y",Math.round(e.y/Qe.ratio))})),Jt.init(i,{x:Qe.containerLeft,y:Qe.containerTop},(function(e){"input"===M(r,t,xe)&&Ye.addInputValues(n,"x",Math.round(e.x/Qe.ratio),"y",Math.round(e.y/Qe.ratio),"width",Math.round(e.width/Qe.ratio),"height",Math.round(e.height/Qe.ratio)),"image"===M(r,t,xe)&&Ye.addImageValues(n,"x",Math.round(e.x/Qe.ratio),"y",Math.round(e.y/Qe.ratio),"width",Math.round(e.width/Qe.ratio),"height",Math.round(e.height/Qe.ratio))})),Yt.set(i,["Control","d"],(function(t){return r.clone(t,n)})),Yt.set(i,["Control","c"],(function(t){return r.copy(t,n)})),Yt.set(document.body,["Control","v"],(function(t){return r.paste(t)})),Yt.set(i,["Delete"],(function(){return r.delete(r.selectedElementId)}))}}}]),t}(),xe={writable:!0,value:void 0};l(ke,"selectedElementId",void 0);var Ae,Se,Ee,_e,$e,Ie,Me,Le,Ce,Te,Oe,Pe,je,He,Ne,Be=function(){function t(){a(this,t)}return u(t,null,[{key:"add",value:function(){qe.displayEditBlock(!1),Ot.init(Qe.element.querySelector(".wrapper"),{x:Qe.containerLeft,y:Qe.containerTop},function(){var t=o(n().mark((function t(e,r){var i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return qe.displayEditBlock(!0),i=$t.generateId().toString(),o={id:i,type:"text"},t.next=5,Ye.addInputValues(o,"x",Math.round(e.startX/Qe.ratio),"y",Math.round(e.startY/Qe.ratio),"width",Math.round(e.x/Qe.ratio-e.startX/Qe.ratio),"height",Math.round(e.y/Qe.ratio-e.startY/Qe.ratio));case 5:ke.select(r,o);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}}]),t}(),De=function(){function t(){a(this,t)}return u(t,null,[{key:"add",value:function(){qe.displayEditBlock(!1),Ot.init(Qe.element.querySelector(".wrapper"),{x:Qe.containerLeft,y:Qe.containerTop},function(){var t=o(n().mark((function t(e,r){var i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:qe.displayEditBlock(!0),i={id:$t.generateId().toString()},$t.confirm(ot(Ae||(Ae=b(['\n\t\t\t\t\t<label for="file">\n\t\t\t\t\t\t<span>Choisissez un fichier</span>\n\t\t\t\t\t\t<input type="file" id="file" name="file" @change="','">\n\t\t\t\t\t</label>\n\t\t\t\t'])),(function(t){o=t.target.files[0]})),(function(){var t=new FileReader;t.addEventListener("load",(function(){Ye.addImageValues(i,"x",Math.round(e.startX/Qe.ratio),"y",Math.round(e.startY/Qe.ratio),"width",Math.round(e.x/Qe.ratio-e.startX/Qe.ratio),"height",Math.round(e.y/Qe.ratio-e.startY/Qe.ratio),"image",t.result),ke.select(r,i),qe.isSaved=!1})),t.readAsDataURL(o)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}}]),t}(),Fe=function(){function t(){a(this,t)}return u(t,null,[{key:"render",value:function(){var e,n,r,i,o=this;lt(ot(Se||(Se=b(["\n\t\t<style>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</style>\n\t\t"])),null===(e=Ye.sheet.fonts)||void 0===e?void 0:e.filter((function(t){return"google"===t.type})).map((function(t){return"@import url(".concat(t.fontUrl,");")})),null===(n=Ye.sheet.fonts)||void 0===n?void 0:n.filter((function(t){return"file"===t.type})).map((function(t){return"\n\t\t\t\t@font-face {\n\t\t\t\tfont-family: ".concat(t.fontFamily,";\n\t\t\t\tsrc: url(").concat(t.fontUrl,");\n\t\t\t\t}\n\t\t\t\t")}))),document.head),lt(ot(Ee||(Ee=b(['\n\t\t\t\n\t\t\t\t<div style="position: relative;width: ',";height: ",';" class="wrapper '," "," ",'" @click="','">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),Qe.containerWidth,Qe.containerHeight,qe.editMode&&"editMode",qe.notepadMode&&"notepadMode",qe.interface||"hover",(function(t){qe.editMode&&ke.select(t),qe.notepadMode&&qe.displayNotepadMode(!1)}),"hidden"===qe.interface?C(this,t,Re).call(this):"",qe.editMode?C(this,t,We).call(this):ot(_e||(_e=b(['\n\t\t\t\t\t<fs-link role="button" class="home contrast" href="/">\n\t\t\t\t\t\t<svg class="home"> \n\t\t\t\t\t\t\t<use href="#home"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t<span>Accueil</span>\n\t\t\t\t\t</fs-link>\n\t\t\t\t\t<button class="edit contrast" @click="','">Éditer</button>\n\t\t\t\t\t<button class="notepad contrast ','" @click="','">Bloc notes</button>\n\t\t\t\t\t',"\n\t\t\t\t"])),(function(){return qe.displayEditMode(!0)}),qe.notepadMode&&"selected",(function(t){t.stopPropagation(),qe.displayNotepadMode(!qe.notepadMode)}),qe.notepadMode?ot($e||($e=b(['\n\t\t\t\t\t<article id="notepad" @click="','">\n\t\t\t\t\t\t<textarea @change="','">',"</textarea>\n\t\t\t\t\t</article>\n\t\t\t\t\t"])),(function(t){return t.stopPropagation()}),(function(t){return Ye.saveNotepad(t.target.value)}),Ye.sheet.notepad):""),null===(r=Ye.sheet.inputs)||void 0===r?void 0:r.map((function(e){return ot(Ie||(Ie=b(['\n\t\t\t\t\t\t\t<label for="','" style="transform: translate(',"px, ",'px);" class="','">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t","\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t"])),e.id,e.x*Qe.ratio,e.y*Qe.ratio,ke.selectedElementId===e.id?"selected":"","textarea"===e.type?ot(Me||(Me=b(['\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tid="','"\n\t\t\t\t\t\t\t\t\t\t\tname="','"\n\t\t\t\t\t\t\t\t\t\t\tstyle="font-size: ',"px;width: ","px;height: ","px;color: ",";text-align: ",";font-family: ",';"\n\t\t\t\t\t\t\t\t\t\t\t@change="','"\n\t\t\t\t\t\t\t\t\t\t\t?readonly="','"\n\t\t\t\t\t\t\t\t\t\t\t@click="','"\n\t\t\t\t\t\t\t\t\t>',"</textarea>\n\t\t\t\t\t\t\t\t"])),e.id,e.id,e.fontSize*Qe.ratio,e.width*Qe.ratio,e.height*Qe.ratio,e.color,e.textAlign,e.fontFamily,(function(t){return Ye.addAndSaveInput(e,"value",t.target.value)}),qe.editMode,(function(t){return ke.select(t,e)}),e.value):ot(Le||(Le=b(['\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype="','"\n\t\t\t\t\t\t\t\t\t\t\tid="','"\n\t\t\t\t\t\t\t\t\t\t\tname="','"\n\t\t\t\t\t\t\t\t\t\t\tvalue="','"\n\t\t\t\t\t\t\t\t\t\t\tstyle="font-size: ',"px;width: ","px;height: ","px;color: ",";text-align: ",";font-family: ",';"\n\t\t\t\t\t\t\t\t\t\t\t@change="','"\n\t\t\t\t\t\t\t\t\t\t\t?readonly="','"\n\t\t\t\t\t\t\t\t\t\t\t@click="','"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t'])),e.type,e.id,e.id,e.value,e.fontSize*Qe.ratio,e.width*Qe.ratio,e.height*Qe.ratio,e.color,e.textAlign,e.fontFamily,(function(t){return Ye.addAndSaveInput(e,"value",t.target.value)}),qe.editMode,(function(t){return ke.select(t,e)})),ke.selectedElementId===e.id?Jt.boxPositions.map((function(t){return ot(Ce||(Ce=b(['<div class="resizeHandler ','" />'])),t.class)})):"",ke.selectedElementId===e.id?C(o,t,ze).call(o,e):"")})),null===(i=Ye.sheet.images)||void 0===i?void 0:i.map((function(e){return ot(Te||(Te=b(['\n\t\t\t\t\t\t\t<div id="','" style="transform: translate(',"px, ","px);width: ","px;height: ",'px;" class="image '," ",'" @click="','">\n\t\t\t\t\t\t\t\t<div style="background-image: url(',')"></div>\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t"])),e.id,e.x*Qe.ratio,e.y*Qe.ratio,e.width*Qe.ratio,e.height*Qe.ratio,ke.selectedElementId===e.id?"selected":"",qe.isZoomed===e.id?"isZoomed":"",(function(n){qe.editMode?ke.select(n,e):(qe.isZoomed?qe.isZoomed=!1:qe.isZoomed=e.id,t.render())}),e.image,ke.selectedElementId===e.id?Jt.boxPositions.map((function(t){return ot(Oe||(Oe=b(['<div class="resizeHandler ','" />'])),t.class)})):"",ke.selectedElementId===e.id?C(o,t,ze).call(o,e):"")}))),Qe.element)}}]),t}();function Re(){var t=this;return ot(Pe||(Pe=b(['\n\t\t\t<div class="viewBlock">\n\t\t\t\t<a href="#" role="button" class="viewSelection ','" @click="','" title="Interface sur demande">\n\t\t\t\t\t<svg class="eye-plus">\n\t\t\t\t\t\t<use href="#eye-plus"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t\t<a href="#" role="button" class="viewSelection ','" @click="','" title="Interface toujours visible">\n\t\t\t\t\t<svg class="eye">\n\t\t\t\t\t\t<use href="#eye"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t\t<a href="#" role="button" class="viewSelection ','" @click="','" title="Interface cachée">\n\t\t\t\t\t<svg class="eye-blocked">\n\t\t\t\t\t\t<use href="#eye-blocked"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t\t<a href="#" role="button" ?disabled="','" class="saveButton" @click="','" title="Sauvegarder">\n\t\t\t\t\t<svg class="floppy">\n\t\t\t\t\t\t<use href="#floppy"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t'])),"hover"===qe.interface?"selected":"",(function(){qe.interface="hover"}),"visible"===qe.interface?"selected":"",(function(){qe.interface="visible"}),"hidden"===qe.interface?"selected":"",(function(){qe.interface="hidden"}),qe.isSaved,o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.save();case 2:t.render();case 3:case"end":return e.stop()}}),e)}))))}function We(){return ot(je||(je=b(['\n\t\t\t<article .hidden="','" class="editBlock">\n\t\t\t\t','\n\t\t\t\t<button class="contrast" @click="','">Image de fond</button>\n\t\t\t\t<button class="contrast" @click="','">Couleur du fond</button>\n\t\t\t\t<button class="contrast" @click="','">Ajouter une police</button>\n\t\t\t\t<button class="contrast" @click="','">Supprimer une police</button>\n\t\t\t\t<button class="contrast" @click="','">Ajouter un champ</button>\n\t\t\t\t<button class="contrast" @click="','">Ajouter une image</button>\n\t\t\t\t<div class="validBlock">\n\t\t\t\t\t<button @click="','">Annuler\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="save" @click="','">Enregistrer et fermer\n\t\t\t\t\t\t<fs-loader ?visible="','"></fs-loader>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t'])),qe.isEditBlockHidden,"hidden"!==qe.interface?C(this,Fe,Re).call(this):"",(function(){return Qe.editBackgroundImage()}),(function(){return Qe.changeBackgroundColor()}),(function(){return Qe.addFont()}),(function(){return Qe.deleteFont()}),(function(){return Be.add()}),(function(){return De.add()}),(function(){qe.displayEditMode(!1)}),o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye.save();case 2:qe.displayEditMode(!1);case 3:case"end":return t.stop()}}),t)}))),Ye.isSaving)}function ze(t){return ot(He||(He=b(['\n\t\t\t<article class="selectBlock">\n\t\t\t\t<a href="#" role="button" class="cloneInput" @click="','" title="Dupliquer (ctrl D)">\n\t\t\t\t\t<svg class="clone">\n\t\t\t\t\t\t<use href="#clone"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t\t<a href="#" role="button" class="deleteInput" @click="','" title="Supprimer (Suppr)">\n\t\t\t\t\t<svg class="trash">\n\t\t\t\t\t\t<use href="#trash"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t\t',"\n\t\t\t</article>\n\t\t"])),(function(e){e.preventDefault(),ke.clone(e,t)}),(function(e){e.preventDefault(),ke.delete(t.id)}),function(t,e){return[{id:"id",type:"hidden",name:"id",value:t.id},{id:"type",type:"select",name:"Type",value:t.type,options:[{name:"Texte court",value:"text"},{name:"Texte long",value:"textarea"},{name:"Nombre",value:"number"}]},{id:"fontFamily",type:"select",name:"Police",value:t.fontFamily,options:e},{id:"fontSize",type:"number",name:"Taille de la police",value:t.fontSize},{id:"color",type:"color",name:"Couleur de la police",value:t.color},{id:"textAlign",type:"select",name:"Alignement",value:t.textAlign,options:[{name:"Gauche",value:"left"},{name:"Centré",value:"center"},{name:"Droite",value:"right"},{name:"Justifié",value:"justify"}]},{id:"width",type:"number",name:"Largeur",value:t.width},{id:"height",type:"number",name:"Hauteur",value:t.height},{id:"x",type:"number",name:"Abscisse",value:t.x},{id:"y",type:"number",name:"Ordonnée",value:t.y}]}(t,Ye.sheet.fonts.map((function(t){return{name:t.fontFamily,value:t.fontFamily}}))).filter((function(e){return t.type||t.image&&t[e.id]})).map((function(e){return ot(Ne||(Ne=b(['\n\t\t\t\t\t<fs-label\n\t\t\t\t\t\t\tid="','"\n\t\t\t\t\t\t\ttype="','"\n\t\t\t\t\t\t\tname="','"\n\t\t\t\t\t\t\tvalue="','"\n\t\t\t\t\t\t\t@input="','"\n\t\t\t\t\t\t\toptions="','"\n\t\t\t\t\t></fs-label>\n\t\t\t\t'])),e.id,e.type,e.name,e.value,(function(n){return Ye.addInputValues(t,e.id,n.target.value)}),JSON.stringify(e.options))})))}var qe=function(){function t(){a(this,t)}return u(t,null,[{key:"displayEditMode",value:function(t){ke.select(),this.editMode=t,this.notepadMode=this.notepadMode&&!t,Ye.changedInputs=[],Ye.changedImages=[],Ye.deletedInputs=[],Ye.deletedImages=[],Ye.sheetProperties=[],Fe.render()}},{key:"displayNotepadMode",value:function(t){this.notepadMode=t,Fe.render()}},{key:"displayEditBlock",value:function(t){Jt.isPointerDown||ue.isPointerDown||(this.isEditBlockHidden=!t,Fe.render())}}]),t}();l(qe,"editMode",void 0),l(qe,"notepadMode",void 0),l(qe,"isEditBlockHidden",void 0),l(qe,"interface","hover"),l(qe,"isSaved",!0),l(qe,"isZoomed",!1);var Ye=function(){function t(){a(this,t)}var e,r,i,s;return u(t,null,[{key:"init",value:(s=o(n().mark((function e(){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($t.loader(!0),r=location.pathname.split("/"),e.t0=_t.get("sheets"),e.t0){e.next=7;break}return e.next=6,$t.request("/db","POST",{body:'{ "getSheets": "" }'});case 6:e.t0=e.sent;case 7:i=e.t0,_t.set("sheets",i),this.sheet=i.find((function(t){return t.slug===r[r.length-1]})),L(this,t,Ke,this.sheet._id);case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"addAndSaveInput",value:(i=o(n().mark((function t(e){var r,i,o,a=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=a.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=a[o];return this.addInputValues.apply(this,[e].concat(i)),t.next=4,this.save(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"saveNotepad",value:(r=o(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sheet.notepad=e,this.sheetProperties=[{setNotepad:{text:e}}],t.next=4,this.save();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"addInputValues",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i+1];i%2==0&&(t[n[i]]=Number(o)||o)}var a;this.sheet.inputs||(this.sheet.inputs=[]),qe.editMode&&(a=this.changedInputs.findIndex((function(e){return e.id===t.id})),this.changedInputs[-1!==a?a:this.changedInputs.length||0]=t),a=this.sheet.inputs.findIndex((function(e){return e.id===t.id})),this.sheet.inputs[-1!==a?a:this.sheet.inputs.length||0]=t,qe.isSaved=!1,Fe.render()}},{key:"addImageValues",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i+1];i%2==0&&(t[n[i]]=Number(o)||o)}var a;this.sheet.images||(this.sheet.images=[]),qe.editMode&&(a=this.changedImages.findIndex((function(e){return e.id===t.id})),this.changedImages[-1!==a?a:this.changedImages.length||0]=t),a=this.sheet.images.findIndex((function(e){return e.id===t.id})),this.sheet.images[-1!==a?a:this.sheet.images.length||0]=t,qe.isSaved=!1,Fe.render()}},{key:"save",value:(e=o(n().mark((function e(r){var i,o,a,s,u,l,c,h=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isSaving=!0,i=[],null==(o=r?[r]:this.changedInputs)||o.forEach((function(e){i.push({setInput:{id:M(h,t,Ke),inputId:e.id,input:e}})})),r||(null===(a=this.deletedInputs)||void 0===a||a.forEach((function(e){i.push({deleteInput:{id:M(h,t,Ke),inputId:e}})})),null===(s=this.changedImages)||void 0===s||s.forEach((function(e){i.push({setImage:{id:M(h,t,Ke),imageId:e.id,image:e}})})),null===(u=this.deletedImages)||void 0===u||u.forEach((function(e){i.push({deleteImage:{id:M(h,t,Ke),imageId:e}})})),null===(l=this.sheetProperties)||void 0===l||l.forEach((function(e){Object.values(e)[0].id=M(h,t,Ke),i.push(e)}))),e.next=7,$t.request("/db","POST",{body:JSON.stringify(i)});case 7:c=e.sent,_t.set("sheets",c.pop()),this.isSaving=!1,qe.isSaved=!0;case 11:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]),t}();l(Ye,"sheet",void 0),l(Ye,"changedInputs",void 0),l(Ye,"changedImages",void 0),l(Ye,"deletedInputs",void 0),l(Ye,"deletedImages",void 0),l(Ye,"sheetProperties",void 0),l(Ye,"isSaving",!1);var Ve,Xe,Ue,Ge,Je,Ze,Ke={writable:!0,value:void 0},Qe=function(t){c(i,v(HTMLElement));var e,r=g(i);function i(){return a(this,i),r.apply(this,arguments)}return u(i,[{key:"connectedCallback",value:(e=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye.init();case 2:i.element=this,this.style.backgroundColor=Ye.sheet.backgroundColor,i.setBackgroundImage(Ye.sheet.backgroundImage||"../../assets/default.jpg"),window.addEventListener("resize",(function(){return i.resize()})),Yt.set(document.body,["Control","s"],o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye.save();case 2:Fe.render();case 3:case"end":return t.stop()}}),t)})))),Yt.set(document.body,["Tab"],(function(){qe.interface="hover"===qe.interface?"visible":"visible"===qe.interface?"hidden":"hover",Fe.render()}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],[{key:"setBackgroundImage",value:function(t){var e=this,n=new Image;n.onload=function(){L(e,i,tn,n.naturalWidth),L(e,i,en,n.naturalHeight),e.resize()},n.src=t,this.element.style.backgroundImage="url(".concat(n.src,")")}},{key:"resize",value:function(){var t=document.body.getBoundingClientRect();this.element.style.width="".concat(t.width,"px"),this.element.style.height="".concat(t.height,"px");var e=t.width*M(this,i,en)/M(this,i,tn),n=e<t.height;this.containerWidth="".concat(n?t.width:M(this,i,tn)*t.height/M(this,i,en),"px"),this.containerHeight="".concat(n?e:t.height,"px"),this.ratio=n?t.width/M(this,i,tn):t.height/M(this,i,en),this.containerLeft=(t.width-parseInt(this.containerWidth))/2,this.containerTop=(t.height-parseInt(this.containerHeight))/2,Fe.render(),setTimeout((function(){return $t.loader(!1)}))}},{key:"changeBackgroundColor",value:function(){var t,e=this;$t.confirm(ot(Ve||(Ve=b(['\n\t\t\t<label for="color">\n\t\t\t\t<span>Choisissez une couleur</span>\n\t\t\t\t<input type="color" id="color" name="color" value="','" @change="','">\n\t\t\t</label>\n\t\t'])),Ye.sheet.backgroundColor,function(){var e=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.target.value;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(function(){e.element.style.backgroundColor=t,Ye.sheet.backgroundColor=t,Ye.sheetProperties.push({setBackgroundColor:{color:t}}),qe.isSaved=!1,Fe.render()}))}},{key:"editBackgroundImage",value:function(){var t,e=this;$t.confirm(ot(Xe||(Xe=b(['\n\t\t\t<label for="file">\n\t\t\t\t<span>Choisissez un fichier</span>\n\t\t\t\t<input type="file" id="file" name="file" @change="','">\n\t\t\t</label>\n\t\t'])),(function(e){t=e.target.files[0]})),(function(){var n=new FileReader;n.addEventListener("load",(function(){e.setBackgroundImage(n.result),Ye.sheet.backgroundImage=n.result,Ye.sheetProperties.push({setBackgroundImage:{image:n.result}})})),n.readAsDataURL(t),qe.isSaved=!1,Fe.render()}))}},{key:"addFont",value:function(){var t,e,r;$t.confirm(ot(Ue||(Ue=b(['\n\t\t\t<label for="fontUrl">\n\t\t\t\t<span>Ajouter l\'URL d\'une police (import google)</span>\n\t\t\t\t<input type="text" id="fontUrl" name="fontUrl" @change="','">\n\t\t\t<label for="file">\n\t\t\t\t<span>Ou</span>\n\t\t\t\t<input accept=".ttf,.woff,.woff2,.eot" type="file" id="file" name="file" @change="','">\n\t\t\t</label>\n\t\t\t<label for="fontFamily">\n\t\t\t\t<span>Nom de la police (font family)</span>\n\t\t\t\t<input type="text" id="fontFamily" name="fontFamily" @change="','">\n\t\t\t</label>\n\t\t'])),function(){var e=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.target.value;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(t){r=t.target.files[0]}),function(){var t=o(n().mark((function t(r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.target.value;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o(n().mark((function i(){var o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ye.sheet.fonts||(Ye.sheet.fonts=[]),!r){n.next=5;break}return n.next=4,$t.getFileFromFileReader(r);case 4:t=n.sent;case 5:o={fontUrl:t,fontFamily:e,type:r?"file":"google"},Ye.sheet.fonts.push(o),Ye.sheetProperties.push({setFont:o}),qe.isSaved=!1,Fe.render();case 10:case"end":return n.stop()}}),i)}))))}},{key:"deleteFont",value:function(){var t=[];$t.confirm(ot(Ge||(Ge=b(["\n\t\t\t<ul>\n\t\t\t\t","\n\t\t\t</ul>\n\t\t"])),Ye.sheet.fonts.map((function(e){return ot(Je||(Je=b(['\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<label for="','">\n\t\t\t\t\t\t\t<input type="checkbox" id="','" name="','" value="','" @change="','">',"</label>\n\t\t\t\t\t</li>\n\t\t\t\t"])),e.fontFamily,e.fontFamily,e.fontFamily,e.fontFamily,(function(n){var r=e.fontFamily;n.target.checked?t.push(r):t=t.filter((function(t){return t!==r}))}),e.fontFamily)}))),(function(){t.forEach((function(t){Ye.sheet.fonts=Ye.sheet.fonts.filter((function(e){return e.fontFamily!==t}))})),Ye.sheetProperties.push({deleteFont:{fonts:t}}),qe.isSaved=!1,Fe.render()}))}}]),i}(),tn={writable:!0,value:void 0},en={writable:!0,value:void 0};l(Qe,"element",void 0),l(Qe,"containerWidth",void 0),l(Qe,"containerHeight",void 0),l(Qe,"ratio",void 0),l(Qe,"containerLeft",void 0),l(Qe,"containerTop",void 0);var nn,rn=new WeakSet,on=new WeakSet,an=function(t){c(n,v(HTMLElement));var e=g(n);function n(){var t;a(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return D(y(t=e.call.apply(e,[this].concat(i))),on),D(y(t),rn),t}return u(n,[{key:"open",get:function(){return this.hasAttribute("open")},set:function(t){t?this.setAttribute("open",""):this.removeAttribute("open")}},{key:"connectedCallback",value:function(){H(this,on,un).call(this),this.style.display="none"}},{key:"attributeChangedCallback",value:function(t,e,n){var r=this;"open"===t&&e!==n&&(this.style.display="",setTimeout((function(){return H(r,on,un).call(r)}),50))}}],[{key:"observedAttributes",get:function(){return["open"]}}]),n}();function sn(){var t=this;this.open=!1,setTimeout((function(){t.style.display="none",t.message="",H(t,on,un).call(t)}),225)}function un(){var t=this;lt(ot(Ze||(Ze=b(['\n\t\t\t<dialog ?open="','">\n\t\t\t\t<article>\n\t\t\t\t\t','\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t<a role="button" class="secondary" @click="','">Cancel</a>\n\t\t\t\t\t\t<a role="button" @click="','">Confirm</a>\n\t\t\t\t\t</footer>\n\t\t\t\t</article>\n\t\t\t</dialog>\n\t\t'])),this.open,this.message,(function(e){e.preventDefault(),H(t,rn,sn).call(t)}),(function(e){e.preventDefault(),t.dispatchEvent(new CustomEvent("modalConfirm")),H(t,rn,sn).call(t)})),this)}var ln,cn,hn,fn,dn=new WeakSet,pn=new WeakSet,vn=function(t){c(n,v(HTMLElement));var e=g(n);function n(){var t;a(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return D(y(t=e.call.apply(e,[this].concat(i))),pn),D(y(t),dn),t}return u(n,[{key:"connectedCallback",value:function(){H(this,pn,mn).call(this),H(this,dn,yn).call(this)}}]),n}();function yn(){var t=this.querySelector("form");t.addEventListener("submit",function(){var e=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,$t.request("/auth","POST",{body:JSON.stringify(Object.fromEntries(new FormData(t).entries()))});case 3:location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function mn(){lt(ot(nn||(nn=b(['\n\t\t\t<form>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Identifiant</span>\n\t\t\t\t\t<input name="id" required type="text">\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Mot de passe</span>\n\t\t\t\t\t<input name="password" required type="password">\n\t\t\t\t</label>\n\t\t\t\t<button type="submit">\n\t\t\t\t\t<span>Envoyer</span>\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t']))),this)}var gn,bn,wn,kn,xn,An,Sn,En,_n=new WeakSet,$n=function(t){c(n,v(HTMLElement));var e=g(n);function n(){var t;a(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return D(y(t=e.call.apply(e,[this].concat(i))),_n),t}return u(n,[{key:"id",get:function(){return this.getAttribute("id")},set:function(t){this.setAttribute("id",t)}},{key:"name",get:function(){return this.getAttribute("name")},set:function(t){this.setAttribute("name",t)}},{key:"value",get:function(){return this.getAttribute("value")},set:function(t){this.setAttribute("value",t)}},{key:"type",get:function(){return this.getAttribute("type")},set:function(t){this.setAttribute("type",t)}},{key:"options",get:function(){return JSON.parse(this.getAttribute("options"))},set:function(t){this.setAttribute("options",t)}},{key:"connectedCallback",value:function(){H(this,_n,In).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){"value"===t&&e!==n&&(this.value=n,H(this,_n,In).call(this))}}],[{key:"observedAttributes",get:function(){return["value"]}}]),n}();function In(){var t,e=this;lt(ot(ln||(ln=b(['\n\t\t\t<label for="','" @click="','">\n\t\t\t\t<span>',"</span>\n\t\t\t\t","\n\t\t\t</label>\n\t\t"])),this.id,(function(t){return t.stopPropagation()}),this.name,"select"===this.type?ot(cn||(cn=b(['\n\t\t\t\t\t<select id="','" title="','">\n\t\t\t\t\t\t<option value="" selected>Choisir un ',"</option>\n\t\t\t\t\t\t","\n\t\t\t\t\t</select>\n\t\t\t\t"])),this.id,this.name,this.name,null===(t=this.options)||void 0===t?void 0:t.map((function(t){return ot(hn||(hn=b(['\n\t\t\t\t\t\t\t<option ?selected="','" value="','">',"</option>\n\t\t\t\t\t\t"])),e.value===t.value,t.value,t.name)}))):ot(fn||(fn=b(['\n\t\t\t\t\t<input type="','" id="','" name="','" value="','" title="','"/>\n\t\t\t\t'])),this.type,this.id,this.id,this.value,this.name)),this)}var Mn,Ln=new WeakMap,Cn=new WeakMap,Tn=new WeakSet,On=new WeakSet,Pn=new WeakSet,jn=new WeakSet,Hn=new WeakSet,Nn=new WeakSet,Bn=new WeakSet,Dn=new WeakSet,Fn=function(t){c(i,v(HTMLElement));var e,r=g(i);function i(){var t;a(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return D(y(t=r.call.apply(r,[this].concat(n))),Dn),D(y(t),Bn),D(y(t),Nn),D(y(t),Hn),D(y(t),jn),D(y(t),Pn),D(y(t),On),D(y(t),Tn),B(y(t),Ln,{writable:!0,value:void 0}),B(y(t),Cn,{writable:!0,value:null}),t}return u(i,[{key:"connectedCallback",value:(e=o(n().mark((function t(){var e=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($t.getFragmentHtml(location.pathname),$t.loader(!0),t.t0=$,t.t1=this,t.t2=Ln,t.t3=_t.get("sheets"),t.t3){t.next=10;break}return t.next=9,$t.request("/db","POST",{body:'{ "getSheets": "" }'});case 9:t.t3=t.sent;case 10:t.t4=t.t3,(0,t.t0)(t.t1,t.t2,t.t4),_t.set("sheets",_(this,Ln)),$(this,Ln,Array.isArray(_(this,Ln))?_(this,Ln):Object.keys(_(this,Ln)).length?[_(this,Ln)]:[]),H(this,Dn,Jn).call(this),window.addEventListener("resize",(function(){return H(e,Tn,Rn).call(e)})),setTimeout((function(){H(e,Tn,Rn).call(e),$t.loader(!1)}));case 17:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),i}();function Rn(){var t=document.querySelector("#main"),e=t.getBoundingClientRect(),n=document.querySelector("#parchment");n&&(n.style.width="".concat(e.width,"px"),n.style.height="".concat(Math.max(e.height,document.body.getBoundingClientRect().height-e.top-parseInt(getComputedStyle(t).marginBottom)),"px"),H(this,Dn,Jn).call(this))}function Wn(t){return zn.apply(this,arguments)}function zn(){return(zn=o(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_(this,Ln).some((function(t){return(t.name.toLowerCase()===e.name.toLowerCase()||t.slug===$t.slugify(e.name))&&t._id!==e.id}))){t.next=11;break}return t.t0=$,t.t1=this,t.t2=Ln,t.next=6,$t.request("/db","POST",{body:'{ "setSheet": '.concat(JSON.stringify(e)," }")});case 6:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),_t.set("sheets",_(this,Ln)),t.next=12;break;case 11:$t.toast("error","Une feuille de personnage portant le même nom ou la même url existe");case 12:H(this,Bn,Gn).call(this);case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function qn(t,e){return Yn.apply(this,arguments)}function Yn(){return(Yn=o(n().mark((function t(e,r){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="INPUT"===e.target.tagName?e.target:e.target.closest("div").querySelector("input"),t.next=3,H(this,On,Wn).call(this,{name:i.value,id:r});case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Vn(){var t,e=this;$t.confirm(ot(gn||(gn=b(['\n\t\t\t<label for="name">\n\t\t\t\t<span>Choisissez un nom</span>\n\t\t\t\t<input type="text" id="name" name="name" @change="','"> \n\t\t\t</label>\n\t\t'])),function(){var e=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.target.value;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o(n().mark((function r(){return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",H(e,On,Wn).call(e,{name:t}));case 1:case"end":return n.stop()}}),r)}))))}function Xn(t){var e=this;$t.confirm(ot(bn||(bn=b(["<h3>Voulez-vous vraiment supprimer ?</h3>"]))),o(n().mark((function r(){return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=$,n.t1=e,n.t2=Ln,n.next=5,$t.request("/db","POST",{body:'{ "removeSheet": { "id": "'.concat(t,'" } }')});case 5:n.t3=n.sent,(0,n.t0)(n.t1,n.t2,n.t3),_t.set("sheets",_(e,Ln)),H(e,Bn,Gn).call(e),$t.toast("success","Feuille de personnage supprimée");case 10:case"end":return n.stop()}}),r)}))))}function Un(t){var e,r=this;$t.confirm(ot(wn||(wn=b(['\n\t\t\t<label for="name">\n\t\t\t\t<span>Dupliquer la feuille de personnage</span>\n\t\t\t\t<input type="text" id="name" name="name" @change="','"> \n\t\t\t</label>\n\t\t'])),function(){var t=o(n().mark((function t(r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.target.value;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o(n().mark((function i(){var o;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=_(r,Ln).find((function(e){return e._id===t}))).name=e,o.slug=$t.slugify(e),delete o._id,delete o.id,n.next=7,H(r,On,Wn).call(r,o);case 7:case"end":return n.stop()}}),i)}))))}function Gn(){$(this,Cn,null),H(this,Dn,Jn).call(this)}function Jn(){var t=this;lt(ot(kn||(kn=b(['\n\t\t\t<div class="title">\n\t\t\t\t<h2>Vos feuilles de personnage</h2>\n\t\t\t\t<button type="button" class="add" @click="','">\n\t\t\t\t\t<svg class="add">\n\t\t\t\t\t\t<use href="#document"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<span>Ajouter une feuille</span> \n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<aside>\n\t\t\t\t<nav>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t',"\n\t\t\t\t\t</ul>\n\t\t\t\t</nav>\n\t\t\t</aside>\n\t\t"])),(function(){return H(t,jn,Vn).call(t)}),_(this,Ln).length?_(this,Ln).map((function(e){var n=e._id,r=e.name;return ot(An||(An=b(['\n\t\t\t\t<li>\n\t\t\t\t\t<div class="characterSheets">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t"])),_(t,Cn)===n?ot(Sn||(Sn=b(['\n\t\t\t\t\t\t\t<input name="editSheet" required type="text" value="','" @keyup="','"/>\n\t\t\t\t\t\t\t<button class="valid" @click="','">\n\t\t\t\t\t\t\t\t<svg class="valid">\n\t\t\t\t\t\t\t\t\t<use href="#valid"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<span>Valider</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button type="button" class="undo" @click="','">\n\t\t\t\t\t\t\t\t<svg class="undo">\n\t\t\t\t\t\t\t\t\t<use href="#undo"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<span>Annuler</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t'])),r,(function(e){"Enter"===e.key&&H(t,Pn,qn).call(t,e,n),"Escape"===e.key&&H(t,Bn,Gn).call(t)}),(function(e){return H(t,Pn,qn).call(t,e,n)}),(function(){return H(t,Bn,Gn).call(t)})):ot(En||(En=b(['\n\t\t\t\t\t\t\t<fs-link role="link" href="/sheets/','">\n\t\t\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t\t</fs-link>\n\t\t\t\t\t\t\t<button type="button" class="clone" @click="','">\n\t\t\t\t\t\t\t\t<svg class="clone">\n\t\t\t\t\t\t\t\t\t<use href="#documents"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<span>Dupliquer</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class="edit" @click="','">\n\t\t\t\t\t\t\t\t<svg class="edit">\n\t\t\t\t\t\t\t\t\t<use href="#pencil"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<span>Modifier</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button type="button" class="remove" @click="','">\n\t\t\t\t\t\t\t\t<svg class="remove">\n\t\t\t\t\t\t\t\t\t<use href="#bin"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<span>Supprimer</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t'])),e.slug,r,(function(){return H(t,Nn,Un).call(t,n)}),(function(){$(t,Cn,n),H(t,Dn,Jn).call(t)}),(function(){return H(t,Hn,Xn).call(t,n)})))})):ot(xn||(xn=b(["<li>Aucune feuille ...</li>"])))),this)}var Zn,Kn=new WeakMap,Qn=new WeakSet,tr=function(t){c(n,v(HTMLElement));var e=g(n);function n(){var t;a(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return D(y(t=e.call.apply(e,[this].concat(i))),Qn),B(y(t),Kn,{writable:!0,value:void 0}),t}return u(n,[{key:"type",get:function(){return this.getAttribute("type")}},{key:"message",get:function(){return this.getAttribute("message")}},{key:"visible",get:function(){return this.getAttribute("visible")},set:function(t){this.setAttribute("visible",t)}},{key:"connectedCallback",value:function(){var t=this;H(this,Qn,er).call(this),setTimeout((function(){$(t,Kn,t.message),t.removeAttribute("message"),t.visible="visible"}),50),setTimeout((function(){t.visible="",setTimeout((function(){return t.remove()}),225)}),4e3)}},{key:"attributeChangedCallback",value:function(t,e,n){"visible"===t&&e!==n&&H(this,Qn,er).call(this)}}],[{key:"observedAttributes",get:function(){return["visible"]}}]),n}();function er(){lt(ot(Mn||(Mn=b(["\n\t\t\t<div class='toast "," ","' role='alert'>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),this.type,this.visible,_(this,Kn)),this)}var nr=new WeakSet,rr=function(t){c(i,v(HTMLElement));var e,r=g(i);function i(){var t;a(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return D(y(t=r.call.apply(r,[this].concat(n))),nr),t}return u(i,[{key:"href",get:function(){return this.getAttribute("href")},set:function(t){this.setAttribute("open",t)}},{key:"connectedCallback",value:(e=o(n().mark((function t(){var e,r,i,o=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Array.from(this.children),H(this,nr,ir).call(this),null===(e=this.querySelector("slot"))||void 0===e||e.replaceWith.apply(e,r),t.next=5,$t.getFragmentHtml(this.href);case 5:i=t.sent,this.addEventListener("click",(function(){history.pushState({},"",o.href),or(i)}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),i}();function ir(){lt(ot(Zn||(Zn=b(["\n\t\t\t<slot></slot>\n\t\t"]))),this)}var or=function(t){document.querySelector("[data-replaced-zone]").replaceChildren(document.createRange().createContextualFragment(t.text)),document.body.className=t.class;var e=document.querySelector("[data-replaced-title]");e&&(e.innerHTML=t.title)};window.addEventListener("popstate",o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=or,t.next=3,$t.getFragmentHtml(location.pathname);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})))),new(function(){function t(){a(this,t),$t.helpers(),this.wakeLock(),"/"===location.href.charAt(location.href.length-1)&&history.replaceState({},"",location.href.replace(/\/$/,""))}var e;return u(t,[{key:"wakeLock",value:(e=o(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,r=function(){var t=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.wakeLock.request();case 3:e=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("".concat(t.t0.name,", ").concat(t.t0.message));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),document.addEventListener("visibilitychange",o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e||"visible"!==document.visibilityState){t.next=3;break}return t.next=3,r();case 3:case"end":return t.stop()}}),t)})))),t.next=5,r();case 5:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),t}()),customElements.define("fs-loader",Ct),customElements.define("fs-toast",tr),customElements.define("fs-confirm",an),customElements.define("fs-home",Fn),customElements.define("fs-sheet",Qe),customElements.define("fs-label",$n),customElements.define("fs-login",vn),customElements.define("fs-link",rr);
